function getLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(showPosition)}function showPosition(o){lat=o.coords.latitude,lng=o.coords.longitude}function initCool(o){coolForm.classList.contains("voted")||getCookie("liked")||(console.log("init"),coolTimer=setTimeout(function(){pushCool()},1e3))}function pushCool(){likes.push({post:lastSegment,time:time}),setVoted(),document.cookie="liked="+url}function cancelCool(o){console.log("cancel"),coolTimer&&clearInterval(coolTimer)}function setVoted(){coolForm.className+=" voted",coolLbl.innerHTML="Hey, thanks."}function getCookie(o){var e="; "+document.cookie,t=e.split("; "+o+"=");return 2==t.length?t.pop().split(";").shift():void 0}var likes=new Firebase("https://hmnia.firebaseIO.com/likes"),url=window.location.href,segments=url.split("/"),lat="unknown",lng="unknown",coolForm=document.querySelector(".cool"),coolCount=document.querySelector(".cool_count"),coolLbl=document.querySelector(".cool_lbl");if(0==segments[segments.length-1].length)var lastSegment=segments[segments.length-2];else var lastSegment=segments[segments.length-1];var time=new Date,dd=time.getDate(),mm=time.getMonth()+1,yyyy=time.getFullYear(),hour=time.getHours(),minute=time.getMinutes();10>dd&&(dd="0"+dd),10>mm&&(mm="0"+mm);var time=mm+"/"+dd+"/"+yyyy+" "+hour+":"+minute,coolTimer;getCookie("liked")&&setVoted(),coolForm.onmouseenter=initCool,coolForm.onmouseleave=cancelCool,coolForm.ontouchstart=function(o){o.preventDefault(),coolForm.className=coolForm.className.replace("unhover",""),initCool()},coolForm.ontouchend=function(o){o.preventDefault(),coolForm.className+=" unhover",setTimeout(function(){cancelCool()},10)},coolForm.className+=" enabled",likes.orderByChild("post").equalTo(lastSegment).on("value",function(o){var e=o.numChildren();coolCount.innerHTML=e,coolForm.className+=" visible"});