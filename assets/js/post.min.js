function initCool(o){coolForm.classList.contains("voted")||getCookie("liked")||(console.log("init"),coolTimer=setTimeout(function(){pushCool()},1e3))}function pushCool(){likes.push({post:lastSegment}),setVoted(),document.cookie="liked="+url}function cancelCool(o){console.log("cancel"),coolTimer&&clearInterval(coolTimer)}function setVoted(){coolForm.className+=" voted",coolLbl.innerHTML="Hey, thanks."}function getCookie(o){var e="; "+document.cookie,l=e.split("; "+o+"=");return 2==l.length?l.pop().split(";").shift():void 0}var likes=new Firebase("https://hmnia.firebaseIO.com/likes"),url=window.location.href,segments=url.split("/"),coolForm=document.querySelector(".cool"),coolCount=document.querySelector(".cool_count"),coolLbl=document.querySelector(".cool_lbl");if(0==segments[segments.length-1].length)var lastSegment=segments[segments.length-2];else var lastSegment=segments[segments.length-1];var body=document.querySelector("body");body.className+=" touch",document.onmousemove=function(){body.classList.contains("touch")&&(body.className=body.className.replace(" touch",""))};var coolTimer;getCookie("liked")&&setVoted(),coolForm.onmouseenter=initCool,coolForm.onmouseleave=cancelCool,coolForm.ontouchstart=function(o){o.preventDefault(),coolForm.className=coolForm.className.replace("unhover",""),initCool()},coolForm.ontouchend=function(o){o.preventDefault(),coolForm.className+=" unhover",setTimeout(function(){cancelCool()},10)},coolForm.className+=" enabled",likes.orderByChild("post").equalTo(lastSegment).on("value",function(o){var e=o.numChildren();coolCount.innerHTML=e,coolForm.className+=" visible"});